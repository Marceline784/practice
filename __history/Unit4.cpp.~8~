//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "Unit4.h"
#include "Unit2.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma link "HTMLabel"
#pragma link "AdvEdit"
#pragma link "DBAdvEd"
#pragma link "AdvGlowButton"
#pragma resource "*.dfm"
TForm4 *Form4;
//---------------------------------------------------------------------------
__fastcall TForm4::TForm4(TComponent* Owner)
	: TForm(Owner)
{
	Form4->Color = (TColor)0x1E1E1E;

	DBAdvEdit1->Color = (TColor)0x1E1E1E;
	DBAdvEdit1->Font->Color = clWhite;
	DBAdvEdit1->Flat = true;

	DBAdvEdit2->Color = (TColor)0x1E1E1E;
	DBAdvEdit2->Font->Color = clWhite;
	DBAdvEdit2->Flat = true;

	DBAdvEdit3->Color = (TColor)0x1E1E1E;
	DBAdvEdit3->Font->Color = clWhite;
	DBAdvEdit3->Flat = true;

	DBAdvEdit4->Color = (TColor)0x1E1E1E;
	DBAdvEdit4->Font->Color = clWhite;
	DBAdvEdit4->Flat = true;
	DBAdvEdit4->EditType = etPassword;
	DBAdvEdit4->PasswordChar = '*';

	DBAdvEdit5->Color = (TColor)0x1E1E1E;
	DBAdvEdit5->Font->Color = clWhite;
	DBAdvEdit5->Flat = true;
}
//---------------------------------------------------------------------------
void __fastcall TForm4::ButtonClick(TObject *Sender)
{
  String pib = DBAdvEdit1->Text.Trim();
String login = DBAdvEdit2->Text.Trim();
String phone = DBAdvEdit3->Text.Trim();
String password = DBAdvEdit4->Text.Trim();
String photo = DBAdvEdit5->Text.Trim();


if (pib.IsEmpty() || login.IsEmpty() || password.IsEmpty() || phone.IsEmpty()) {
	ShowMessage("Будь ласка, заповніть обов'язкові поля: ПІБ, Логін, Пароль, Телефон.");
	return;
}

try {
	Form1->ADOTable2->Append();

	Form1->ADOTable2->FieldByName("ПІБ")->AsString = pib;
	Form1->ADOTable2->FieldByName("Логін")->AsString = login;
	Form1->ADOTable2->FieldByName("Пароль")->AsString = password;
	Form1->ADOTable2->FieldByName("Телефон")->AsString = phone;

	if (!photo.IsEmpty())
		Form1->ADOTable2->FieldByName("Фото")->AsString = photo;
	else
		Form1->ADOTable2->FieldByName("Фото")->Clear();

	Form1->ADOTable2->Post();

	ShowMessage("Реєстрація успішна!");
	this->Hide();
	Form1->Show();
}
catch (const Exception &e) {
	ShowMessage("Помилка при збереженні: " + e.Message);
}

}
//---------------------------------------------------------------------------
